# TripoSR Google Colab Instructions

Copy and paste the code blocks below into separate cells in a new Google Colab notebook.

## Cell 1: Setup and Installation

# Install required dependencies
%cd /content

# Clone the repository from your fork
!git clone https://github.com/wirapratamaz/TripoSR.git
%cd /content/TripoSR

# Install basic dependencies
!pip install -q trimesh omegaconf einops rembg gradio

# Install torchmcubes with CUDA support
!pip install -q git+https://github.com/tatsy/torchmcubes.git

# Install additional dependencies from requirements.txt
!pip install -r requirements.txt

# Install specific versions to ensure compatibility
!pip install huggingface-hub==0.26.0
!pip install transformers==4.35.0
!pip install accelerate==0.20.3

# Install additional dependencies
!pip install -q xatlas==0.0.9
!pip install -q imageio[ffmpeg]
!pip install -q onnxruntime

# Ensure we have the latest gradio
!pip install --upgrade gradio

# Set up environment variables for better GPU memory management
import os
os.environ['PYTORCH_CUDA_ALLOC_CONF'] = 'max_split_size_mb:128'

# Check if CUDA is available
import torch
print(f"CUDA available: {torch.cuda.is_available()}")
if torch.cuda.is_available():
    print(f"CUDA device: {torch.cuda.get_device_name(0)}")
    print(f"CUDA memory: {torch.cuda.get_device_properties(0).total_memory / 1e9:.2f} GB")

## Cell 2: Run the Gradio App with Lower Resolution

# Run the Gradio app with lower resolution for faster processing
%cd /content/TripoSR
!python gradio_app.py --queuesize 1 --share

## Alternative Cell 2: Direct Processing (Faster)

# Process an example image directly without the Gradio interface
%cd /content/TripoSR
!python run.py examples/tiger_girl.png --mc-resolution 128 --output-dir output/

# Display the output directory contents
!ls -la output/0/
